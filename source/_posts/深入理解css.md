---
layout: post
title: css的权重问题
date: 2017-09-15 21:31:26
tags: 
    深入理解css
categories:
	css
comments: true
---

<<<<<<< HEAD
最近这些日子一直忙着找实习，前两天滴滴面试官问到css权重问题，后来发现跟之前理解的还是有些区别，在这里简单总结一下。
<!-- more --> 
### css样式的优先级

> !important > 行间样式 > id选择器 > class选择器 > 标签选择器 > 通配符（*）

### css的权重问题
当接触到复杂的选择器时我们就不能简单用优先级来进行判断了，这个时候就需要引入各种选择器的权重值来进行计算。
> *  !important：                         无穷大
> *  行间样式：                             1000
> *  id选择器：                              100
> *  class选择器，属性选择器或伪类：            10
> *  元素和伪元素选择器：                       1

当使用复杂选择器给元素添加样式时，最后样式的选择是不同样式对应选择器权重值进行加和比较的结果。<font color='red'>
注意：这里的 无穷大+1 > 无穷大 </font>
下面我们举个小栗子：
这里我们写一个div:
    ```HTML
=======
最近这些日子一直忙着找实习，前两天滴滴面试官问道css权重问题，后来发现跟之前理解的还是有些区别，在这里简单总结一下。

<!-- more --> 

##css样式的优先级

    !important > 行间样式 > id选择器 > class选择器 > 标签选择器 > 通配符（*）

##css的权重问题

    当接触到复杂的选择器时我们就不能简单用优先级来进行判断了，这个时候就需要引入各种选择器的权重值来进行计算。
    * !important:                           无穷大
    * 行间样式:                               1000
    * id选择器:                                100
    * class选择器，属性选择器或伪类:              10
    * 元素和伪元素选择器:                         1

    当使用复杂选择器给元素添加样式时，最后样式的选择是不同样式对应选择器权重值进行加和比较的结果。
    <font color='red'>注意：这里的 无穷大+1 > 无穷大 </font>

    下面我们举个小栗子：
    这里我们写一个div:
    ```javascript
>>>>>>> master
        <div class="div1 div2 div3 div4 div5 div6 div7 div8 div9 div10" id='id'><div>
    ```
        div {
			height: 100px;
			width: 100px;
		}

		#div1{
			background: blue;
		}

		.div1.div2.div3.div4.div5.div6.div7.div8.div9.div10{
			background: yellow;
		}
    
这里的div有10个class类名，并且对应的样式代码写在id选择器之后。
按照我们之前理解的权重计算规则10个class选择器并列选择同一个div权重为 10 * 10 = 100，同理id选择器权重值也正好是100，而且并列选择器写在后面，div理论上来说应该是黄色的。但是真的是这样么？
其实不然，div最后是这样的：
    <img src="/imgs/div.png" width="100" height="100"> 
这也是我之前对权重计算的一种误解，其实<font color='red'>权重值的计算并非10进制</font>，优先级低的选择器个数再多地进行并列选择也不能超过优先级高的。也就是说<font color='red'>权重值的计算是在相同优先级的选择器下进行计算的比较的</font>。所以为了方便起见我们将权重值分别表示为： 无穷大&nbsp;&nbsp; 1,0,0,0 &nbsp;&nbsp; 0,1,0,0 &nbsp;&nbsp; 0,0,1,0 &nbsp;&nbsp; 0,0,0,1 &nbsp;&nbsp; 0,0,0,0
<font color='red'>当进行复杂选择器的权重比较时，先按照优先级进行比较（按位比较），优先级相同的进行权重值比较（同位数字比较）（也就是说1,0,0,0 > 0,99,99,99）。</font>
对于上面举得例子而言：id选择器的权重为 0,1,0,0 ，由class组成的并列选择器为 0,0,10,0， 这样来看比较结果就显而易见了。当然这仅仅只是一个测试用例，一般我们也不会这样选择元素。这个并列选择器还好，如果是父子选择器，出于性能考虑一般都不会超过4层。 但是研究问题就应该深入理解一下不是么~_~

最后还要补充一点：
如果某个元素class（类选择器）的数量大于255个，不同的浏览器的表现不一致，包括但不限于以下浏览器认为class选择器的优先级会超过id选择器（摘自某大佬博客）：
>Firefox 52.0.2 (64 位)
>IE 11
